# DYlike - 디와이산업개발 슈팅 게임

## 프로젝트 정보
- **게임 타입**: 갤러그 스타일 네온 슈팅 게임 (3캐릭터 + 스킬 시스템)
- **엔진**: 순수 Canvas API (이전: Phaser.js 3.80.1)
- **배포 URL**: https://dy-like-game.web.app
- **GitHub**: https://github.com/wiikang84/dylike
- **Firebase 프로젝트**: dy-like-game

## 배포 방법
```bash
# Firebase 배포
firebase deploy --only hosting

# Git 푸시
git add . && git commit -m "메시지" && git push origin main
```

## 주요 파일
- `index.html` - 게임 전체 (단일 파일, ~1960줄)
- `game.js` - (구버전 뱀서라이크 게임, 보존용)
- `style.css` - (구버전 스타일, 보존용)
- `firebase.json` - Firebase 설정
- `.firebaserc` - Firebase 프로젝트 연결

## 게임 시스템

### 플레이어
- 64x64 고퀄리티 스프라이트 (4방향 애니메이션)
- DY산업개발 환경미화원 컨셉
- WASD/방향키 이동, 자동 공격

### 무기 (12종)
| 무기 | 아이콘 | 설명 |
|------|--------|------|
| 고압 세척기 | 💧 | 기본 무기, 물 발사 |
| 정화 필드 | 🔵 | 주변 회전 오브 |
| 중화제 탄 | 🎯 | 유도 미사일 |
| 준설호스 | 🌊 | 흡입 범위 공격 (range 250) |
| 산업용 송풍기 | 💨 | 부채꼴 밀치기+데미지 |
| 오염측정기 | 📡 | 체인 번개 공격 |
| 보호장갑 | 🧤 | 빠른 펀치 |
| 소독스프레이 | 🧴 | 정화 영역 생성 |
| 안전콘 | 🔶 | 설치 후 폭발 |
| 청소차 | 🚛 | 돌진 공격 |
| 환경드론 | 🚁 | 자동 순찰 공격 |
| 폐수파이프 | 🔧 | 관통 투사체 |

### 패시브 (16종)
| 패시브 | 아이콘 | 효과 |
|--------|--------|------|
| 정화력 | ⚔️ | 데미지 +10% |
| 이동속도 | 👟 | 속도 +12% |
| 체력 | 🛡️ | HP +20 |
| 자석 | 🧲 | 수집범위 +40% |
| 재생 | 💚 | 초당 HP +2 |
| 효율성 | ⚡ | 쿨다운 -8% |
| 투사체 | ✨ | 투사체 +1 |
| 범위 | 🎆 | 공격범위 +12% |
| 숙련도 | 📈 | 경험치 +10% |
| 방어력 | 🔒 | 데미지 -1 |
| 크리티컬 | 💥 | 치명타 +5% |
| 치명타력 | 🔥 | 치명타 뎀 +20% |
| 지속시간 | ⏱️ | 효과시간 +12% |
| 행운 | 🍀 | 드롭률 +8% |
| 관통 | 🗡️ | 관통 +1 |
| 흡혈 | 🩸 | 데미지 2% HP회복 |

### 몬스터 (8종)
| 기본 | 신규 |
|------|------|
| 슬러지, 폐수, 폐기물, 유해가스 | 오염수, 기름때, 폐유통, 슬러지 거인 |

### 클래스 (3종) - NEW!
| 클래스 | 아이콘 | 특성 | 시작 무기 |
|--------|--------|------|----------|
| 세척원 | 💧 | HP +20%, 물 공격 +30% | 고압 세척기 |
| 정화원 | 🔮 | 범위 +25%, 쿨다운 -15% | 정화 필드 |
| 기술자 | 🔧 | 크리티컬 +10%, 이동속도 +15% | 오염측정기 |

### 층 시스템 (10층) - NEW!
| 층 | 이름 | 보스 | 난이도 배율 |
|----|------|------|------------|
| 1층 | 오염된 로비 | 슬러지 킹 | x1.0 |
| 2층 | 폐기물 창고 | 드럼통 거인 | x1.3 |
| 3층 | 독성 연구실 | 오염의 사신 | x1.6 |
| ... | ... | ... | ... |
| 10층 | 최종 정화 | 오염의 사신 | x5.0 |

### 장비 시스템 - NEW!
| 등급 | 색상 | 드롭률 | 스탯 배율 |
|------|------|--------|----------|
| 일반 | 흰색 | 70% | x1.0 |
| 고급 | 녹색 | 20% | x1.3 |
| 희귀 | 파랑 | 8% | x1.6 |
| 전설 | 주황 | 2% | x2.0 |

**장비 슬롯**: 무기, 방어구, 장갑, 신발, 악세서리

### 스킬 밴/리롤 - NEW!
- **리롤**: 레벨업 시 첫 리롤 무료, 추가 리롤은 EXP 10 소모
- **밴**: 카드 우클릭으로 밴 (최대 3개), 밴된 스킬은 이후 등장 안 함

### 보스 (3종)
- 각 층별로 등장, 층마다 HP/데미지 배율 증가
- 슬러지 킹, 드럼통 거인, 오염의 사신

### 난이도 스케일링
- **HP**: 분당 +25%, 레벨당 +4%
- **속도**: 분당 +10% (최대 2배)
- **데미지**: 분당 +15%, 레벨당 +2%
- **엘리트**: 3분 이후 등장 (HP 4배, 데미지 2배)

### UI
- 왼쪽: 스킬 아이콘 목록 (무기/패시브)
- 오른쪽 하단: 미니맵
- 상단: HP바, 레벨, 타이머, 경험치바

## Game Juice 효과
- 피격 시: 스크린 쉐이크 + 빨간 플래시 + 깜빡임
- 적 처치 시: 파티클 폭발
- 보스 등장: 경고 텍스트 + 플래시
- 보스 처치: 히트스톱 + 대형 파티클 + 황금 플래시
- 레벨업: 파란 플래시 + 파티클

## 웨이브 시스템
| 시간 | 스폰간격 | 동시스폰 | 웨이브 크기 |
|------|---------|---------|------------|
| 0분 | 350ms | 3 | 20 |
| 5분 | 180ms | 7 | 50 |
| 9분 | 120ms | 9 | 80 |
| 12분 | 80ms | 12 | 100 |

## 수정 규칙
- 코드 삭제 금지, 주석처리로 보존
- 수정 후 반드시: `firebase deploy` + `git push`

## 변경 이력
- 2026-02-07: 모바일 전면 대응 리빌드
  - 캔버스 자동 리사이즈 (화면 크기에 맞게 CSS 스케일링, 내부 480x640 유지)
  - 터치 컨트롤 하단 고정 바 (◀ ▶ 64px, FIRE 80px, Z/X/C 52px)
  - 터치 디바이스 자동 감지 (ontouchstart + maxTouchPoints + UA)
  - 첫 터치 시 자동 전체화면 진입
  - 가로모드 경고 화면 (세로 모드 전환 안내)
  - 100dvh 적용 (모바일 주소창 대응)
  - safe-area-inset 대응 (노치/홈바 영역)
  - touchcancel 처리 (버튼 밖으로 나갈 때)
  - 모바일/PC 분기 안내 텍스트 (TAP TO START / CLICK or SPACE)
  - 전체화면 시 document.documentElement 사용 (컨트롤 포함)
  - resize + orientationchange 이벤트 리사이즈
- 2026-02-07: 클릭/터치/전체화면 대응 업데이트
  - 마우스 클릭으로 모든 화면 조작 가능 (시작/선택/게임오버)
  - 모바일 터치 컨트롤 추가 (◀ ▶ 방향, FIRE, Z/X/C 스킬 버튼)
  - 전체화면 버튼(⛶) + F키 토글 지원
  - Canvas tabindex 추가로 키보드 포커스 개선
  - 캐릭터 선택 화면 클릭 지원 (카드 클릭으로 선택/확정)
- 2026-02-07: 게임 전면 교체 - 갤러그 스타일 슈팅 게임으로 변경
  - 기존 뱀서라이크(Phaser.js) → 네온 갤러그(Canvas API) 완전 교체
  - 3캐릭터 시스템: 준설공(탱커)/세정공(딜러)/신호수(지휘관) - 실제 직종 기반
  - 캐릭터 선택 화면 (스탯 바, 스킬 미리보기, 글로우 애니메이션)
  - 9개 스킬 시스템 (Z/X/C 키, 쿨다운 UI, 전용 이펙트)
  - 성능 최적화 (deltaTime 게임루프, 엔티티 상한선, 프리렌더링 캐시)
  - 캐릭터별 고유 외형 및 엔진 이펙트 (Canvas Path 기반)
  - 기존 game.js, style.css는 보존용으로 유지
- 2026-02-06: 비주얼 대폭 개선 (하이브리드 스타일)
  - 터렛/탱크/드론 전면 리디자인 (컨테이너 기반, 레이어 분리)
  - 소환 이펙트 추가 (원형 소환진 + 파티클)
  - 남은시간 바 추가 (소환물 하단)
  - 공격 범위 점선 원으로 변경 (가독성 향상)
  - 머즐 플래시 + 미사일 트레일 + 다중 폭발 이펙트
  - 포탑 회전 애니메이션, 드론 호버링/프로펠러 애니메이션
  - 퇴장 시 파티클 효과
- 2026-02-06: 난이도 선택 시스템 & 보스 이름 변경 & 그래픽 개선
  - 난이도 선택 추가: 쉬움/보통/어려움/헬모드
  - 1층 보스: 슬러지 킹 → **서민영**
  - 2층 보스: 드럼통 거인 → **강빛나**
  - 무기 설명 업데이트 (터렛/탱크/드론 스타일)
  - 터렛/탱크/드론 그래픽 SF 스타일로 대폭 개선
- 2026-02-06: 난이도 하향 & 무기 포토캐논 스타일 리워크
  - 전체 난이도 15% 하향 (적/보스 속도, 데미지 감소, 경험치 증가)
  - 안전콘: 캐릭터 옆에서 5초+ **미사일 발사** 후 사라짐 (포토캐논 스타일)
  - 청소차: 캐릭터 옆에서 6초+ **미사일 발사** 후 사라짐 (터렛 스타일)
  - 환경드론: 캐릭터 위에서 5초+ **유도 미사일 발사** 후 사라짐
  - 레벨 올라갈수록 지속시간/데미지/발사속도 증가
- 2026-02-06: 보스 충돌 수정 & 모바일 전체화면 대응
  - 보스(슬러지 킹 등) 충돌 영역 수정 - 텍스처 크기에 맞게 충돌 범위 확대
  - Phaser Scale.FIT 모드 적용 - 모바일 기기별 화면 자동 맞춤
  - 전체화면 버튼 추가 (타이틀/게임 화면 모두)
  - index.html 전체화면 CSS 스타일 추가
- 2026-02-06: 바벨탑 스타일 대규모 업그레이드
  - 클래스 시스템 (3종): 세척원/정화원/기술자
  - 층 시스템 (10층): 층별 난이도 스케일링, 층 보스
  - 장비 드롭 시스템: 일반/고급/희귀/전설 등급, 5개 슬롯
  - 스킬 밴/리롤 시스템: 우클릭 밴, 리롤 버튼
  - ClassSelectScene, FloorClearScene 추가
  - 클래스별 시작 무기 및 보너스 적용
- 2025-02-06: 대규모 콘텐츠 확장
  - 무기 8종 추가 (4종 → 12종)
  - 패시브 11종 추가 (5종 → 16종)
  - 준설호스 흡입 이펙트 + 사거리 증가
  - 캐릭터 DY 로고 추가 (안전모+작업복)
  - 크리티컬/흡혈/방어력 시스템
  - 경험치/드롭률 보너스 시스템
- 2024-02-06: 초기 버전 배포
  - 고퀄리티 텍스처 시스템
  - 웨이브 기반 스폰
  - 엘리트 몬스터
  - 스킬 UI
  - 미니맵
  - 준설호스 무기
  - 난이도 스케일링
